class customSelect{constructor(e){this.selector=e.selector,this.selectAll=document.querySelectorAll(this.selector)}init(){this.renderTemplate(),this.clickEventOut()}reinit(e){let t=e.parentNode;t.querySelector(".select-styled")&&(t.querySelector(".select-styled").remove(),t.querySelector(".select-list").remove()),this.renderOption(t)}ajaxOption(e,t){let i=new XMLHttpRequest;return i.open("GET",e.dataset.ajax),i.responseType="json",i.setRequestHeader("Content-type","application/json; charset=utf-8"),i.send(),i.onerror=function(){console.err("Error: afSelec ajax request failed")},i.onreadystatechange=function(){3==i.readyState&&e.closest(".af-select").querySelector(".select-list").classList.add("select-list--load"),4==i.readyState&&e.closest(".af-select").querySelector(".select-list").classList.remove("select-list--load")},i.onload=function(){t(i.response)},null}renderOption(n){var s=this,a=n.querySelector("select"),r=a.getAttribute("placeholder"),o=a.getAttribute("multiple");const l=document.createElement("div"),d=(l.classList.add("select-styled"),l.innerHTML="<span>"+r+"</span>",document.createElement("ul")),e=(d.classList.add("select-options"),document.createElement("div"));function c(e){e.querySelectorAll("select > option").forEach(function(e,t){const i=document.createElement("li");if(i.innerHTML=e.innerText,i.setAttribute("rel",e.value),o){let e=document.createElement("span");e.classList.add("af-check-multiple"),i.append(e)}function n(e){if(o){let t=[];return e.parentNode.querySelectorAll("option[selected]").forEach(function(e){t.push(e.innerText)}),t.length?t.join(","):r}return e.innerText}0!=t||r||(l.innerHTML="<span>"+e.innerText+"</span>"),e.getAttribute("selected")&&(l.innerHTML=r?'<span class="af-selected-placeholder" data-af-placeholder="'+r+'">'+n(e)+"</span>":"<span>"+n(e)+"</span>",i.classList.add("active")),e.getAttribute("disabled")||(d.appendChild(i),s.clickEventListItem(i,e,t))})}e.classList.add("select-list"),e.appendChild(d),n.querySelector(".select-styled")||n.appendChild(l),n.querySelector(".select-options")||n.appendChild(e),a.dataset.ajax&&this.ajaxOption(a,function(e){a.innerHTML="";let i=a.dataset.selected;var t=a.getAttribute("placeholder");e.unshift({text:t||"-Выберите-",value:""}),e.forEach(function(e){let t=document.createElement("option");t.value=e.value,t.innerText=e.text,i==e.value&&(t.setAttribute("selected",!0),a.removeAttribute("data-selected")),a.append(t)}),c(n)}),a.dataset.ajax||c(n),a.afSelect=new Object,a.afSelect.open=function(){s.openSelect(n)},a.afSelect.close=function(){s.closeSelect()},a.afSelect.update=function(){s.reinit(a)}}renderTemplate(){const n=this;this.selectAll.forEach(function(e,t){if(!e.classList.contains("select-hidden")){e.classList.add("select-hidden");const i=document.createElement("div");i.classList.add("af-select"),e.getAttribute("multiple")&&i.classList.add("af-select--multiple"),i.innerHTML=e.outerHTML,e.parentNode.replaceChild(i,e),n.clickEventOpenSelect(i)}}),document.querySelectorAll(".af-select").forEach(function(e,t){n.renderOption(e)})}openSelect(e){document.querySelectorAll("select").forEach(function(e){e.afSelect&&e.afSelect.close()}),e.querySelector("select").dataset.ajax&&!e.querySelector(".select-styled").classList.contains("active")&&(e.querySelector(".select-list").remove(),this.renderOption(e)),e.style.maxWidth=e.offsetWidth+"px",e.querySelector(".select-styled").classList.toggle("active"),e.querySelector(".select-options").classList.toggle("active"),e.querySelector(".select-list").classList.toggle("active"),document.querySelector("body").classList.toggle("af-select-open")}closeSelect(){if(!document.querySelector(".select-styled.active"))return!1;document.querySelector(".select-styled.active").classList.remove("active"),document.querySelector(".select-options.active").classList.remove("active"),document.querySelector(".select-list.active").classList.remove("active"),document.querySelector("body").classList.remove("af-select-open")}clickEventOut(){const e=this;document.addEventListener("click",function(){e.closeSelect()})}clickEventListItem(e,n,t){const s=n.parentNode.parentNode,a=this,r=s.querySelector("select").getAttribute("placeholder"),o=s.querySelector("select").getAttribute("multiple"),l=s.querySelector(".select-styled");e.addEventListener("click",function(e){function t(e){if(o){let t=[];return e.parentNode.querySelectorAll("option[selected]").forEach(function(e){t.push(e.innerText)}),t.length?t.join(","):r}return e.innerText}e.stopPropagation(),e.preventDefault(),s.querySelector(".select-options li.active")&&!o&&s.querySelector(".select-options li.active").classList.remove("active"),this.classList.contains("active")?(this.classList.remove("active"),n.removeAttribute("selected")):(this.classList.add("active"),n.setAttribute("selected","selected")),r?l.innerHTML='<span class="af-selected-placeholder" data-af-placeholder="'+r+'">'+t(n)+"</span>":s.querySelector(".select-styled span").innerHTML=t(n),o||(s.querySelector("select").value=this.getAttribute("rel"));var i=new Event("change");s.querySelector("select").dispatchEvent(i),e.target.classList.contains("af-check-multiple")||a.closeSelect()})}clickEventOpenSelect(e){const t=this;function i(e){e.stopPropagation(),e.preventDefault(),t.openSelect(this)}e.removeEventListener("click",i),e.addEventListener("click",i)}}class customModal{constructor(e){this.modal="",e&&(this.mobileBottom=!!e.mobileInBottom&&e.mobileInBottom)}init(){}createTemplate(){let e=document.createElement("div");return e.innerHTML='\n                <div class="af-popup">\n                    <div class="af-popup__bg"></div>\n                    <div class="af-popup__wrp">\n                        <div class="af-popup__container">\n                            <div class="af-popup__close">\n                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"></path></svg>\n                            </div>\n                            <div class="af-popup__content"></div>\n                        </div>\n                    </div>\n                </div>\n                ',document.body.append(e),this.instanse=e}open(e,t){let i=this;this.modal=this.createTemplate(),window.innerWidth<=480&&this.mobileBottom&&this.modal.querySelector(".af-popup").classList.add("af-popup--mobile"),this.modal.querySelector(".af-popup__content").innerHTML=e,this.modal.querySelector(".af-popup__close").addEventListener("click",function(){i.close()}),t&&t(this.modal),this.createEvent()}changeContent(e){this.modal.querySelector(".af-popup__content").innerHTML=e}createEvent(){let e=this;this.instanse.querySelector(".af-popup").addEventListener("click",function(){e.close()}),this.instanse.querySelector(".af-popup__container").addEventListener("click",function(e){e.stopPropagation(!0)})}close(){this.instanse.remove()}}!function(){"use strict";function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e){return e[e.length-1]}function D(t,...e){return e.forEach(e=>{t.includes(e)||t.push(e)}),t}function l(e,t){return e?e.split(t):[]}function c(e,t,i){return(void 0===t||t<=e)&&(void 0===i||e<=i)}function W(e,t,i){return e<t?t:i<e?i:e}function r(e,t,n={},s=0,i=""){i+=`<${Object.keys(n).reduce((e,t)=>{let i=n[t];return`${e} ${t}="${i="function"==typeof i?i(s):i}"`},e)}></${e}>`;var a=s+1;return a<t?r(e,t,n,a,i):i}function e(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function s(e){return new Date(e).setHours(0,0,0,0)}function m(){return(new Date).setHours(0,0,0,0)}function S(...e){switch(e.length){case 0:return m();case 1:return s(e[0])}const t=new Date(0);return t.setFullYear(...e),t.setHours(0,0,0,0)}function u(e,t){const i=new Date(e);return i.setDate(i.getDate()+t)}function h(e,t){const i=new Date(e),n=i.getMonth()+t;let s=n%12;s<0&&(s+=12);e=i.setMonth(n);return i.getMonth()!==s?i.setDate(0):e}function f(e,t){const i=new Date(e),n=i.getMonth(),s=i.setFullYear(i.getFullYear()+t);return 1===n&&2===i.getMonth()?i.setDate(0):s}function j(e,t){return(e-t+7)%7}function a(e,t,i=0){var n=new Date(e).getDay();return u(e,j(t,i)-j(n,i))}function p(e,t){e=new Date(e).getFullYear();return Math.floor(e/t)*t}function x(e,t,i){if(1!==t&&2!==t)return e;const n=new Date(e);return 1===t?i?n.setMonth(n.getMonth()+1,0):n.setDate(1):i?n.setFullYear(n.getFullYear()+1,0,0):n.setMonth(0,1),n.setHours(0,0,0,0)}const E=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,z=/[\s!-/:-@[-`{-~年月日]+/;let i={};const B={y:(e,t)=>new Date(e).setFullYear(parseInt(t,10)),m(t,e,i){const n=new Date(t);let s=parseInt(e,10)-1;if(isNaN(s)){if(!e)return NaN;const t=e.toLowerCase(),n=e=>e.toLowerCase().startsWith(t);if((s=(s=i.monthsShort.findIndex(n))<0?i.months.findIndex(n):s)<0)return NaN}return n.setMonth(s),n.getMonth()!==function e(t){return-1<t?t%12:e(t+12)}(s)?n.setDate(0):n.getTime()},d:(e,t)=>new Date(e).setDate(parseInt(t,10))},q={d:e=>e.getDate(),dd:e=>t(e.getDate(),2),D:(e,t)=>t.daysShort[e.getDay()],DD:(e,t)=>t.days[e.getDay()],m:e=>e.getMonth()+1,mm:e=>t(e.getMonth()+1,2),M:(e,t)=>t.monthsShort[e.getMonth()],MM:(e,t)=>t.months[e.getMonth()],y:e=>e.getFullYear(),yy:e=>t(e.getFullYear(),2).slice(-2),yyyy:e=>t(e.getFullYear(),4)};function t(e,t){return e.toString().padStart(t,"0")}function Y(e){if("string"!=typeof e)throw new Error("Invalid date format.");if(e in i)return i[e];const a=e.split(E),s=e.match(new RegExp(E,"g"));if(0===a.length||!s)throw new Error("Invalid date format.");const t=s.map(e=>q[e]),r=Object.keys(B).reduce((e,t)=>(s.find(e=>"D"!==e[0]&&e[0].toLowerCase()===t)&&e.push(t),e),[]);return i[e]={parser(e,i){const n=e.split(z).reduce((e,t,i)=>{return 0<t.length&&s[i]&&("M"===(i=s[i][0])?e.m=t:"D"!==i&&(e[i]=t)),e},{});return r.reduce((e,t)=>{t=B[t](e,n[t],i);return isNaN(t)?e:t},m())},formatter:(n,s)=>t.reduce((e,t,i)=>e+(""+a[i]+t(n,s)),"")+o(a)}}function M(e,t,i){if(e instanceof Date||"number"==typeof e){const t=s(e);return isNaN(t)?void 0:t}var n;if(e)return"today"===e?m():t&&t.toValue?(n=t.toValue(e,t,i),isNaN(n)?void 0:s(n)):Y(t).parser(e,i)}function d(e,t,i){if(isNaN(e)||!e&&0!==e)return"";e="number"==typeof e?new Date(e):e;return t.toDisplay?t.toDisplay(e,t,i):Y(t).formatter(e,i)}const H=document.createRange();function C(e){return H.createContextualFragment(e)}function P(e){return e.parentElement||(e.parentNode instanceof ShadowRoot?e.parentNode.host:void 0)}function g(e){return e.getRootNode().activeElement===e}function n(e){"none"!==e.style.display&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function v(e){"none"===e.style.display&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function y(e){e.firstChild&&(e.removeChild(e.firstChild),y(e))}const b=new WeakMap,{addEventListener:I,removeEventListener:R}=EventTarget.prototype;function w(e,t){let i=b.get(e);i||(i=[],b.set(e,i)),t.forEach(e=>{I.call(...e),i.push(e)})}function K(e){let t=b.get(e);t&&(t.forEach(e=>{R.call(...e)}),b.delete(e))}if(!Event.prototype.composedPath){const k=(e,t=[])=>{let i;return t.push(e),e.parentNode?i=e.parentNode:e.host?i=e.host:e.defaultView&&(i=e.defaultView),i?k(i,t):t};Event.prototype.composedPath=function(){return k(this.target)}}function $(e,t){var i="function"==typeof t?t:e=>e instanceof Element&&e.matches(t);return function e(t,i,n){var[t,...s]=t;return i(t)?t:t!==n&&"HTML"!==t.tagName&&0!==s.length?e(s,i,n):void 0}(e.composedPath(),i,e.currentTarget)}const O={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},L={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",getCalendarWeek:null,language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:"»",orientation:"auto",pickLevel:0,prevArrow:"«",showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},{language:A,format:J,weekStart:U}=L;function Z(e,t){return e.length<6&&0<=t&&t<7?D(e,t):e}function X(e){return(e+6)%7}function G(e,t,i,n){e=M(e,t,i);return void 0!==e?e:n}function Q(e,t,i=3){e=parseInt(e,10);return 0<=e&&e<=i?e:t}function ee(t,e){const i=Object.assign({},t),n={},s=e.constructor.locales,a=e.rangeSideIndex;let{format:r,getCalendarWeek:o,language:l,locale:d,maxDate:c,maxView:u,minDate:h,pickLevel:f,startView:p,weekStart:m}=e.config||{};if(i.language){let e;if(i.language!==l&&(s[i.language]?e=i.language:void 0===s[e=i.language.split("-")[0]]&&(e=!1)),delete i.language,e){l=n.language=e;const t=d||s[A];d=Object.assign({format:J,weekStart:U},s[A]),l!==A&&Object.assign(d,s[l]),n.locale=d,r===t.format&&(r=n.format=d.format),m===t.weekStart&&(m=n.weekStart=d.weekStart,n.weekEnd=X(d.weekStart))}}if(i.format){const k="function"==typeof i.format.toDisplay,t="function"==typeof i.format.toValue,D=E.test(i.format);(k&&t||D)&&(r=n.format=i.format),delete i.format}let g=f,v=(void 0!==i.pickLevel&&(g=Q(i.pickLevel,2),delete i.pickLevel),g!==f&&(g>f&&(void 0===i.minDate&&(i.minDate=h),void 0===i.maxDate&&(i.maxDate=c)),i.datesDisabled||(i.datesDisabled=[]),f=n.pickLevel=g),h),y=c;if(void 0!==i.minDate){const k=S(0,0,1);(v=null===i.minDate?k:G(i.minDate,r,d,v))!==k&&(v=x(v,f,!1)),delete i.minDate}if(void 0!==i.maxDate&&(void 0!==(y=null===i.maxDate?void 0:G(i.maxDate,r,d,y))&&(y=x(y,f,!0)),delete i.maxDate),y<v?(h=n.minDate=y,c=n.maxDate=v):(h!==v&&(h=n.minDate=v),c!==y&&(c=n.maxDate=y)),i.datesDisabled&&(n.datesDisabled=i.datesDisabled.reduce((e,t)=>{t=M(t,r,d);return void 0!==t?D(e,x(t,f,a)):e},[]),delete i.datesDisabled),void 0!==i.defaultViewDate){const k=M(i.defaultViewDate,r,d);void 0!==k&&(n.defaultViewDate=k),delete i.defaultViewDate}if(void 0!==i.weekStart){const k=Number(i.weekStart)%7;isNaN(k)||(m=n.weekStart=k,n.weekEnd=X(k)),delete i.weekStart}if(i.daysOfWeekDisabled&&(n.daysOfWeekDisabled=i.daysOfWeekDisabled.reduce(Z,[]),delete i.daysOfWeekDisabled),i.daysOfWeekHighlighted&&(n.daysOfWeekHighlighted=i.daysOfWeekHighlighted.reduce(Z,[]),delete i.daysOfWeekHighlighted),void 0!==i.maxNumberOfDates){const k=parseInt(i.maxNumberOfDates,10);0<=k&&(n.maxNumberOfDates=k,n.multidate=1!==k),delete i.maxNumberOfDates}i.dateDelimiter&&(n.dateDelimiter=String(i.dateDelimiter),delete i.dateDelimiter);let b=u,w=(void 0!==i.maxView&&(b=Q(i.maxView,u),delete i.maxView),(b=f>b?f:b)!==u&&(u=n.maxView=b),p);if(void 0!==i.startView&&(w=Q(i.startView,w),delete i.startView),w<f?w=f:w>u&&(w=u),w!==p&&(n.startView=w),i.prevArrow){const k=C(i.prevArrow);0<k.childNodes.length&&(n.prevArrow=k.childNodes),delete i.prevArrow}if(i.nextArrow){const k=C(i.nextArrow);0<k.childNodes.length&&(n.nextArrow=k.childNodes),delete i.nextArrow}if(void 0!==i.disableTouchKeyboard&&(n.disableTouchKeyboard="ontouchstart"in document&&!!i.disableTouchKeyboard,delete i.disableTouchKeyboard),i.orientation){const k=i.orientation.toLowerCase().split(/\s+/g);n.orientation={x:k.find(e=>"left"===e||"right"===e)||"auto",y:k.find(e=>"top"===e||"bottom"===e)||"auto"},delete i.orientation}if(void 0!==i.todayBtnMode){switch(i.todayBtnMode){case 0:case 1:n.todayBtnMode=i.todayBtnMode}delete i.todayBtnMode}return n.getCalendarWeek="function"==typeof i.getCalendarWeek?i.getCalendarWeek:o||null,delete i.getCalendarWeek,Object.keys(i).forEach(e=>{void 0!==i[e]&&k(L,e)&&(n[e]=i[e])}),n}const te=e('<div class="datepicker">\n  <div class="datepicker-picker">\n    <div class="datepicker-header">\n      <div class="datepicker-title"></div>\n      <div class="datepicker-controls">\n        <button type="button" class="%buttonClass% prev-btn"></button>\n        <button type="button" class="%buttonClass% view-switch"></button>\n        <button type="button" class="%buttonClass% next-btn"></button>\n      </div>\n    </div>\n    <div class="datepicker-main"></div>\n    <div class="datepicker-footer">\n      <div class="datepicker-controls">\n        <button type="button" class="%buttonClass% today-btn"></button>\n        <button type="button" class="%buttonClass% clear-btn"></button>\n      </div>\n    </div>\n  </div>\n</div>'),ie=e(`<div class="days">
  <div class="days-of-week">${r("span",7,{class:"dow"})}</div>
  <div class="datepicker-grid">${r("span",42)}</div>
</div>`),ne=e(`<div class="calendar-weeks">
  <div class="days-of-week"><span class="dow"></span></div>
  <div class="weeks">${r("span",6,{class:"week"})}</div>
</div>`);class se{constructor(e,t){Object.assign(this,t,{picker:e,element:C('<div class="datepicker-view"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}init(e){void 0!==e.pickLevel&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}performBeforeHook(e,t,i){let n=this.beforeShow(new Date(i));switch(typeof n){case"boolean":n={enabled:n};break;case"string":n={classes:n}}if(n){if(!1===n.enabled&&(e.classList.add("disabled"),D(this.disabled,t)),n.classes){const i=n.classes.split(/\s+/);e.classList.add(...i),i.includes("disabled")&&D(this.disabled,t)}n.content&&(s=e,i=n.content,y(s),i instanceof DocumentFragment?s.appendChild(i):"string"==typeof i?s.appendChild(C(i)):"function"==typeof i.forEach&&i.forEach(e=>{s.appendChild(e)}))}var s}}class ae extends se{constructor(e){super(e,{id:0,name:"days",cellClass:"day"})}init(e,t=!0){if(t){const e=C(ie).firstChild;this.dow=e.firstChild,this.grid=e.lastChild,this.element.appendChild(e)}super.init(e)}setOptions(e){let t;if(k(e,"minDate")&&(this.minDate=e.minDate),k(e,"maxDate")&&(this.maxDate=e.maxDate),e.datesDisabled&&(this.datesDisabled=e.datesDisabled),e.daysOfWeekDisabled&&(this.daysOfWeekDisabled=e.daysOfWeekDisabled,t=!0),e.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=e.daysOfWeekHighlighted),void 0!==e.todayHighlight&&(this.todayHighlight=e.todayHighlight),void 0!==e.weekStart&&(this.weekStart=e.weekStart,this.weekEnd=e.weekEnd,t=!0),e.locale){const k=this.locale=e.locale;this.dayNames=k.daysMin,this.switchLabelFormat=k.titleFormat,t=!0}if(void 0!==e.beforeShowDay&&(this.beforeShow="function"==typeof e.beforeShowDay?e.beforeShowDay:void 0),void 0!==e.calendarWeeks)if(e.calendarWeeks&&!this.calendarWeeks){const k=C(ne).firstChild;this.calendarWeeks={element:k,dow:k.firstChild,weeks:k.lastChild},this.element.insertBefore(k,this.element.firstChild)}else this.calendarWeeks&&!e.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);"function"==typeof e.getCalendarWeek&&(this.getCalendarWeek=e.getCalendarWeek),void 0!==e.showDaysOfWeek&&(e.showDaysOfWeek?(v(this.dow),this.calendarWeeks&&v(this.calendarWeeks.dow)):(n(this.dow),this.calendarWeeks&&n(this.calendarWeeks.dow))),t&&Array.from(this.dow.children).forEach((e,t)=>{t=(this.weekStart+t)%7;e.textContent=this.dayNames[t],e.className=this.daysOfWeekDisabled.includes(t)?"dow disabled":"dow"})}updateFocus(){const e=new Date(this.picker.viewDate),t=e.getFullYear(),i=e.getMonth(),n=S(t,i,1),s=a(n,this.weekStart,this.weekStart);this.first=n,this.last=S(t,i+1,0),this.start=s,this.focused=this.picker.viewDate}updateSelection(){var{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e,t&&(this.range=t.dates)}render(){this.today=this.todayHighlight?m():void 0,this.disabled=[...this.datesDisabled];const i=d(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(i),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){const i=a(this.first,1,this.weekStart),n=(e,t)=>{return this.getCalendarWeek?this.getCalendarWeek(new Date(e),t):(t=a(e,4,1),e=a(new Date(t).setMonth(0,4),4,1),Math.round((t-e)/6048e5)+1)};Array.from(this.calendarWeeks.weeks.children).forEach((e,t)=>{e.textContent=n(u(i,7*t),this.weekStart)})}Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList,n=u(this.start,t),s=new Date(n),a=s.getDay();if(e.className="datepicker-cell "+this.cellClass,e.dataset.date=n,e.textContent=s.getDate(),n<this.first?i.add("prev"):n>this.last&&i.add("next"),this.today===n&&i.add("today"),(n<this.minDate||n>this.maxDate||this.disabled.includes(n))&&i.add("disabled"),this.daysOfWeekDisabled.includes(a)&&(i.add("disabled"),D(this.disabled,n)),this.daysOfWeekHighlighted.includes(a)&&i.add("highlighted"),this.range){const[e,t]=this.range;n>e&&n<t&&i.add("range"),n===e&&i.add("range-start"),n===t&&i.add("range-end")}this.selected.includes(n)&&i.add("selected"),n===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(e,n,n)})}refresh(){const[n,s]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach(e=>{const t=Number(e.dataset.date),i=e.classList;t>n&&t<s&&i.add("range"),t===n&&i.add("range-start"),t===s&&i.add("range-end"),this.selected.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused")})}refreshFocus(){var e=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}}function re(e,t){var i,n,s;if(e&&e[0]&&e[1])return[[e,i],[n,s]]=e,t<e||n<t?void 0:[e===t?i:-1,n===t?s:12]}class oe extends se{constructor(e){super(e,{id:1,name:"months",cellClass:"month"})}init(e,t=!0){t&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid"),this.grid.appendChild(C(r("span",12,{"data-month":e=>e})))),super.init(e)}setOptions(e){if(e.locale&&(this.monthNames=e.locale.monthsShort),k(e,"minDate"))if(void 0===e.minDate)this.minYear=this.minMonth=this.minDate=void 0;else{const k=new Date(e.minDate);this.minYear=k.getFullYear(),this.minMonth=k.getMonth(),this.minDate=k.setDate(1)}if(k(e,"maxDate"))if(void 0===e.maxDate)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const k=new Date(e.maxDate);this.maxYear=k.getFullYear(),this.maxMonth=k.getMonth(),this.maxDate=S(this.maxYear,this.maxMonth+1,0)}this.isMinView?e.datesDisabled&&(this.datesDisabled=e.datesDisabled):this.datesDisabled=[],void 0!==e.beforeShowMonth&&(this.beforeShow="function"==typeof e.beforeShowMonth?e.beforeShowMonth:void 0)}updateFocus(){const e=new Date(this.picker.viewDate);this.year=e.getFullYear(),this.focused=e.getMonth()}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((e,t)=>{const i=new Date(t),n=i.getFullYear(),s=i.getMonth();return void 0===e[n]?e[n]=[s]:D(e[n],s),e},{}),t&&t.dates&&(this.range=t.dates.map(e=>{const t=new Date(e);return isNaN(t)?void 0:[t.getFullYear(),t.getMonth()]}))}render(){this.disabled=this.datesDisabled.reduce((e,t)=>{const i=new Date(t);return this.year===i.getFullYear()&&e.push(i.getMonth()),e},[]),this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);const s=this.selected[this.year]||[],a=this.year<this.minYear||this.year>this.maxYear,r=this.year===this.minYear,o=this.year===this.maxYear,l=re(this.range,this.year);Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList,n=S(this.year,t,1);if(e.className="datepicker-cell "+this.cellClass,this.isMinView&&(e.dataset.date=n),e.textContent=this.monthNames[t],(a||r&&t<this.minMonth||o&&t>this.maxMonth||this.disabled.includes(t))&&i.add("disabled"),l){const[s,a]=l;t>s&&t<a&&i.add("range"),t===s&&i.add("range-start"),t===a&&i.add("range-end")}s.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(e,t,n)})}refresh(){const n=this.selected[this.year]||[],[s,a]=re(this.range,this.year)||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList;t>s&&t<a&&i.add("range"),t===s&&i.add("range-start"),t===a&&i.add("range-end"),n.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused")})}refreshFocus(){this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}class le extends se{constructor(e,t){super(e,t)}init(e,t=!0){t&&(this.navStep=10*this.step,this.beforeShowOption="beforeShow"+[...this.cellClass].reduce((e,t,i)=>e+(i?t:t.toUpperCase()),""),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid"),this.grid.appendChild(C(r("span",12)))),super.init(e)}setOptions(e){if(k(e,"minDate")&&(void 0===e.minDate?this.minYear=this.minDate=void 0:(this.minYear=p(e.minDate,this.step),this.minDate=S(this.minYear,0,1))),k(e,"maxDate")&&(void 0===e.maxDate?this.maxYear=this.maxDate=void 0:(this.maxYear=p(e.maxDate,this.step),this.maxDate=S(this.maxYear,11,31))),this.isMinView?e.datesDisabled&&(this.datesDisabled=e.datesDisabled):this.datesDisabled=[],void 0!==e[this.beforeShowOption]){const k=e[this.beforeShowOption];this.beforeShow="function"==typeof k?k:void 0}}updateFocus(){var e=new Date(this.picker.viewDate),t=p(e,this.navStep),i=t+9*this.step;this.first=t,this.last=i,this.start=t-this.step,this.focused=p(e,this.step)}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((e,t)=>D(e,p(t,this.step)),[]),t&&t.dates&&(this.range=t.dates.map(e=>{if(void 0!==e)return p(e,this.step)}))}render(){this.disabled=this.datesDisabled.map(e=>new Date(e).getFullYear()),this.picker.setViewSwitchLabel(this.first+"-"+this.last),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach((e,t)=>{const i=e.classList,n=this.start+t*this.step,s=S(n,0,1);if(e.className="datepicker-cell "+this.cellClass,this.isMinView&&(e.dataset.date=s),e.textContent=e.dataset.year=n,0===t?i.add("prev"):11===t&&i.add("next"),(n<this.minYear||n>this.maxYear||this.disabled.includes(n))&&i.add("disabled"),this.range){const[e,t]=this.range;n>e&&n<t&&i.add("range"),n===e&&i.add("range-start"),n===t&&i.add("range-end")}this.selected.includes(n)&&i.add("selected"),n===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(e,n,s)})}refresh(){const[n,s]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(e=>{e.classList.remove("range","range-start","range-end","selected","focused")}),Array.from(this.grid.children).forEach(e=>{const t=Number(e.textContent),i=e.classList;t>n&&t<s&&i.add("range"),t===n&&i.add("range-start"),t===s&&i.add("range-end"),this.selected.includes(t)&&i.add("selected"),t===this.focused&&i.add("focused")})}refreshFocus(){var e=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}}function N(e,t){var i={date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e};e.element.dispatchEvent(new CustomEvent(t,{detail:i}))}function _(e,t){var{minDate:i,maxDate:n}=e.config,{currentView:s,viewDate:a}=e.picker;let r;switch(s.id){case 0:r=h(a,t);break;case 1:r=f(a,t);break;default:r=f(a,t*s.navStep)}r=W(r,i,n),e.picker.changeFocus(r).render()}function de(e){var t=e.picker.currentView.id;t!==e.config.maxView&&e.picker.changeView(t+1).render()}function ce(e){e.config.updateOnBlur?e.update({revert:!0}):e.refresh("input"),e.hide()}function ue(e,t){const i=$(t,".datepicker-cell");if(i&&!i.classList.contains("disabled")){var{id:t,isMinView:n}=e.picker.currentView;if(n)e.setDate(Number(i.dataset.date));else{n=e,e=Number(1===t?i.dataset.month:i.dataset.year);const s=n.picker,a=new Date(s.viewDate),r=s.currentView.id,o=1===r?h(a,e-a.getMonth()):f(a,e-a.getFullYear());void s.changeFocus(o).changeView(r-1).render()}}}function he(e){e.preventDefault()}const fe=["left","top","right","bottom"].reduce((e,t)=>(e[t]="datepicker-orient-"+t,e),{}),pe=e=>e&&e+"px";function me(e,t){if(void 0!==t.title&&(t.title?(e.controls.title.textContent=t.title,v(e.controls.title)):(e.controls.title.textContent="",n(e.controls.title))),t.prevArrow){const k=e.controls.prevBtn;y(k),t.prevArrow.forEach(e=>{k.appendChild(e.cloneNode(!0))})}if(t.nextArrow){const k=e.controls.nextBtn;y(k),t.nextArrow.forEach(e=>{k.appendChild(e.cloneNode(!0))})}if(t.locale&&(e.controls.todayBtn.textContent=t.locale.today,e.controls.clearBtn.textContent=t.locale.clear),void 0!==t.todayBtn&&(t.todayBtn?v:n)(e.controls.todayBtn),k(t,"minDate")||k(t,"maxDate")){const{minDate:k,maxDate:t}=e.datepicker.config;e.controls.todayBtn.disabled=!c(m(),k,t)}void 0!==t.clearBtn&&(t.clearBtn?v:n)(e.controls.clearBtn)}function ge(e){var{dates:e,config:t}=e;return W(0<e.length?o(e):t.defaultViewDate,t.minDate,t.maxDate)}function ve(e,t){const i=new Date(e.viewDate),n=new Date(t),{id:s,year:a,first:r,last:o}=e.currentView,l=n.getFullYear();switch(e.viewDate=t,l!==i.getFullYear()&&N(e.datepicker,"changeYear"),n.getMonth()!==i.getMonth()&&N(e.datepicker,"changeMonth"),s){case 0:return t<r||o<t;case 1:return l!==a;default:return l<r||o<l}}function ye(e){return window.getComputedStyle(e).direction}class be{constructor(e){const t=(this.datepicker=e)["config"],i=te.replace(/%buttonClass%/g,t.buttonClass),n=this.element=C(i).firstChild,[s,a,r]=n.firstChild.children,o=s.firstElementChild,[l,d,c]=s.lastElementChild.children,[u,h]=r.firstChild.children,f={title:o,prevBtn:l,viewSwitch:d,nextBtn:c,todayBtn:u,clearBtn:h};this.main=a,this.controls=f;var p=e.inline?"inline":"dropdown";n.classList.add("datepicker-"+p),me(this,t),this.viewDate=ge(e),w(e,[[n,"mousedown",he],[a,"click",ue.bind(null,e)],[f.viewSwitch,"click",function(e){de(e)}.bind(null,e)],[f.prevBtn,"click",function(e){_(e,-1)}.bind(null,e)],[f.nextBtn,"click",function(e){_(e,1)}.bind(null,e)],[f.todayBtn,"click",function(e){const t=e.picker,i=m();if(1===e.config.todayBtnMode){if(e.config.autohide)return void e.setDate(i);e.setDate(i,{render:!1}),t.update()}t.viewDate!==i&&t.changeFocus(i),t.changeView(0).render()}.bind(null,e)],[f.clearBtn,"click",function(e){e.setDate({clear:!0})}.bind(null,e)]]),this.views=[new ae(this),new oe(this),new le(this,{id:2,name:"years",cellClass:"year",step:1}),new le(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.container?t.container.appendChild(this.element):e.inputField.after(this.element)}setOptions(t){me(this,t),this.views.forEach(e=>{e.init(t,!1)}),this.currentView.render()}detach(){this.element.remove()}show(){if(!this.active){const{datepicker:t,element:i}=this;var e;t.inline?i.classList.add("active"):((e=ye(t.inputField))!==ye(P(i))?i.dir=e:i.dir&&i.removeAttribute("dir"),i.style.visiblity="hidden",i.classList.add("active"),this.place(),i.style.visiblity="",t.config.disableTouchKeyboard&&t.inputField.blur()),this.active=!0,N(t,"show")}}hide(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active"),this.active=!1,N(this.datepicker,"hide"))}place(){const{classList:e,offsetParent:t,style:i}=this.element,{config:n,inputField:s}=this.datepicker,{width:a,height:r}=this.element.getBoundingClientRect(),{left:o,top:l,right:d,bottom:c,width:u,height:h}=s.getBoundingClientRect();let{x:f,y:p}=n.orientation,m=o,g=l;if(t!==document.body&&t){const e=t.getBoundingClientRect();m-=e.left-t.scrollLeft,g-=e.top-t.scrollTop}else m+=window.scrollX,g+=window.scrollY;const v=function e(t){t=P(t);if(t!==document.body&&t)return"visible"!==window.getComputedStyle(t).overflow?t:e(t)}(s);let y=0,b=0,{clientWidth:w,clientHeight:k}=document.documentElement;if(v){const e=v.getBoundingClientRect();0<e.top&&(b=e.top),0<e.left&&(y=e.left),e.right<w&&(w=e.right),e.bottom<k&&(k=e.bottom)}let D=0;"auto"===f&&(o<y?(f="left",D=y-o):o+a>w?(f="right",w<d&&(D=w-d)):f="rtl"!==ye(s)||d-a<y?"left":"right"),"right"===f&&(m+=u-a),m+=D,"top"===(p="auto"===p?l-r>b&&c+r>k?"top":"bottom":p)?g-=r:g+=h,e.remove(...Object.values(fe)),e.add(fe[f],fe[p]),i.left=pe(m),i.top=pe(g)}setViewSwitchLabel(e){this.controls.viewSwitch.textContent=e}setPrevBtnDisabled(e){this.controls.prevBtn.disabled=e}setNextBtnDisabled(e){this.controls.nextBtn.disabled=e}changeView(e){var t=this.currentView,e=this.views[e];return e.id!==t.id&&(this.currentView=e,this._renderMethod="render",N(this.datepicker,"changeView"),this.main.replaceChild(e.element,t.element)),this}changeFocus(e){return this._renderMethod=ve(this,e)?"render":"refreshFocus",this.views.forEach(e=>{e.updateFocus()}),this}update(){var e=ge(this.datepicker);return this._renderMethod=ve(this,e)?"render":"refresh",this.views.forEach(e=>{e.updateFocus(),e.updateSelection()}),this}render(e=!0){e=e&&this._renderMethod||"render";delete this._renderMethod,this.currentView[e]()}}function V(e,t,i,n){const s=e.picker,a=s.currentView,r=a.step||1;let o,l,d=s.viewDate;switch(a.id){case 0:d=n?u(d,7*i):(t.ctrlKey||t.metaKey?f:u)(d,i),o=u,l=e=>a.disabled.includes(e);break;case 1:d=h(d,n?4*i:i),o=h,l=e=>{const t=new Date(e),{year:i,disabled:n}=a;return t.getFullYear()===i&&n.includes(t.getMonth())};break;default:d=f(d,i*(n?4:1)*r),o=f,l=e=>a.disabled.includes(p(e,r))}void 0!==(d=function e(t,i,n,s,a,r){if(c(t,a,r))return s(t)?e(i(t,n),i,n,s,a,r):t}(d,o,i<0?-r:r,l,a.minDate,a.maxDate))&&s.changeFocus(d).render()}function we(e,t){return e.map(e=>d(e,t.format,t.locale)).join(t.dateDelimiter)}function ke(e,t,i=!1){const{config:n,dates:s,rangeSideIndex:a}=e;if(0===t.length)return i?[]:void 0;let r=t.reduce((e,t)=>{t=M(t,n.format,n.locale);return void 0!==t&&(!c(t=x(t,n.pickLevel,a),n.minDate,n.maxDate)||e.includes(t)||n.datesDisabled.includes(t)||!(0<n.pickLevel)&&n.daysOfWeekDisabled.includes(new Date(t).getDay())||e.push(t)),e},[]);return 0!==r.length?(n.multidate&&!i&&(r=r.reduce((e,t)=>(s.includes(t)||e.push(t),e),s.filter(e=>!r.includes(e)))),n.maxNumberOfDates&&r.length>n.maxNumberOfDates?r.slice(-1*n.maxNumberOfDates):r):void 0}function T(e,t=3,i=!0){const{config:n,picker:s,inputField:a}=e;if(2&t){const e=s.active?n.pickLevel:n.startView;s.update().changeView(e).render(i)}1&t&&a&&(a.value=we(e.dates,n))}function De(e,t,i){let{clear:n,render:s,autohide:a,revert:r}=i;(s=void 0===s?!0:s)?void 0===a&&(a=e.config.autohide):a=!1;const o=ke(e,t,n);(o||r)&&(o&&o.toString()!==e.dates.toString()?(e.dates=o,T(e,s?3:1),N(e,"changeDate")):T(e,1),a&&e.hide())}class Se{constructor(e,t={},i){(e.datepicker=this).element=e;const n=this.config=Object.assign({buttonClass:t.buttonClass&&String(t.buttonClass)||"button",container:null,defaultViewDate:m(),maxDate:void 0,minDate:void 0},ee(L,this)),s=this.inline="INPUT"!==e.tagName;let a,r;if(s?n.container=e:(t.container&&(n.container=t.container instanceof HTMLElement?t.container:document.querySelector(t.container)),(a=this.inputField=e).classList.add("datepicker-input")),i){const e=i.inputs.indexOf(a),t=i.datepickers;if(e<0||1<e||!Array.isArray(t))throw Error("Invalid rangepicker object.");t[e]=this,Object.defineProperty(this,"rangepicker",{get:()=>i}),Object.defineProperty(this,"rangeSideIndex",{get:()=>e})}this._options=t,Object.assign(n,ee(t,this)),s?(r=l(e.dataset.date,n.dateDelimiter),delete e.dataset.date):r=l(a.value,n.dateDelimiter),this.dates=[];t=ke(this,r);t&&0<t.length&&(this.dates=t),a&&(a.value=we(this.dates,n));const o=this.picker=new be(this);if(s)this.show();else{const e=function(e,t){const{element:i,picker:n}=e;if(n.active||g(i)){const s=n.element;$(t,e=>e===i||e===s)||ce(e)}}.bind(null,this);w(this,[[a,"keydown",function(e,t){var i=t.key;if("Tab"===i)ce(e);else{const n=e.picker,{id:s,isMinView:a}=n.currentView;if(n.active){if(e.editMode)return void("Enter"===i?e.exitEditMode({update:!0,autohide:e.config.autohide}):"Escape"===i&&n.hide());if("ArrowLeft"===i)if(t.ctrlKey||t.metaKey)_(e,-1);else{if(t.shiftKey)return void e.enterEditMode();V(e,t,-1,!1)}else if("ArrowRight"===i)if(t.ctrlKey||t.metaKey)_(e,1);else{if(t.shiftKey)return void e.enterEditMode();V(e,t,1,!1)}else if("ArrowUp"===i)if(t.ctrlKey||t.metaKey)de(e);else{if(t.shiftKey)return void e.enterEditMode();V(e,t,-1,!0)}else if("ArrowDown"===i){if(t.shiftKey&&!t.ctrlKey&&!t.metaKey)return void e.enterEditMode();V(e,t,1,!0)}else{if("Enter"!==i)return void("Escape"===i?n.hide():"Backspace"!==i&&"Delete"!==i&&(1!==i.length||t.ctrlKey||t.metaKey)||e.enterEditMode());if(a)return void e.setDate(n.viewDate);n.changeView(s-1).render()}}else{if("ArrowDown"!==i)return void("Enter"===i?e.update():"Escape"===i&&n.show());n.show()}t.preventDefault()}}.bind(null,this)],[a,"focus",function(e){e.config.showOnFocus&&!e._showing&&e.show()}.bind(null,this)],[a,"mousedown",function(e,t){const i=t.target;(e.picker.active||e.config.showOnClick)&&(i._active=g(i),i._clicking=setTimeout(()=>{delete i._active,delete i._clicking},2e3))}.bind(null,this)],[a,"click",function(e,t){const i=t.target;i._clicking&&(clearTimeout(i._clicking),delete i._clicking,i._active&&e.enterEditMode(),delete i._active,e.config.showOnClick&&e.show())}.bind(null,this)],[a,"paste",function(e,t){t.clipboardData.types.includes("text/plain")&&e.enterEditMode()}.bind(null,this)],[document,"mousedown",e],[document,"touchstart",e],[window,"resize",o.place.bind(o)]])}}static formatDate(e,t,i){return d(e,t,i&&O[i]||O.en)}static parseDate(e,t,i){return M(e,t,i&&O[i]||O.en)}static get locales(){return O}get active(){return!(!this.picker||!this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(e){const t=this.picker,i=ee(e,this);Object.assign(this._options,e),Object.assign(this.config,i),t.setOptions(i),T(this,3)}show(){if(this.inputField){if(this.inputField.disabled)return;g(this.inputField)||this.config.disableTouchKeyboard||(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}hide(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}destroy(){return this.hide(),K(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}getDate(t){const e=t?e=>d(e,t,this.config.locale):e=>new Date(e);return this.config.multidate?this.dates.map(e):0<this.dates.length?e(this.dates[0]):void 0}setDate(...e){const t=[...e],i={},n=o(e);"object"!=typeof n||Array.isArray(n)||n instanceof Date||!n||Object.assign(i,t.pop()),De(this,Array.isArray(t[0])?t[0]:t,i)}update(e){this.inline||(e=Object.assign(e||{},{clear:!0,render:!0}),De(this,l(this.inputField.value,this.config.dateDelimiter),e))}refresh(e,t=!1){e&&"string"!=typeof e&&(t=e,e=void 0),T(this,"picker"===e?2:"input"===e?1:3,!t)}enterEditMode(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit"))}exitEditMode(e){!this.inline&&this.editMode&&(e=Object.assign({update:!1},e),delete this.editMode,this.inputField.classList.remove("in-edit"),e.update&&this.update(e))}}function xe(e){const t=Object.assign({},e);return delete t.inputs,delete t.allowOneSidedRange,delete t.maxNumberOfDates,t}function Ee(e,t,i,n){w(e,[[i,"changeDate",t]]),new Se(i,n,e)}function F(e,t){if(!e._updating){e._updating=!0;t=t.target;if(void 0!==t.datepicker){const i=e.datepickers,n={render:!1},s=e.inputs.indexOf(t),a=0===s?1:0,r=i[s].dates[0],o=i[a].dates[0];void 0!==r&&void 0!==o?0===s&&o<r?(i[0].setDate(o,n),i[1].setDate(r,n)):1===s&&r<o&&(i[0].setDate(r,n),i[1].setDate(o,n)):e.allowOneSidedRange||void 0===r&&void 0===o||(n.clear=!0,i[a].setDate(i[s].dates,n)),i[0].picker.update().render(),i[1].picker.update().render(),delete e._updating}}}window.Datepicker=Se,window.DateRangePicker=class{constructor(e,t={}){const i=Array.isArray(t.inputs)?t.inputs:Array.from(e.querySelectorAll("input"));if(!(i.length<2)){(e.rangepicker=this).element=e,this.inputs=i.slice(0,2),this.allowOneSidedRange=!!t.allowOneSidedRange;const n=F.bind(null,this),s=xe(t),a=[];Object.defineProperty(this,"datepickers",{get:()=>a}),Ee(this,n,this.inputs[0],s),Ee(this,n,this.inputs[1],s),Object.freeze(a),0<a[0].dates.length?F(this,{target:this.inputs[0]}):0<a[1].dates.length&&F(this,{target:this.inputs[1]})}}get dates(){return 2===this.datepickers.length?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}setOptions(e){this.allowOneSidedRange=!!e.allowOneSidedRange;e=xe(e);this.datepickers[0].setOptions(e),this.datepickers[1].setOptions(e)}destroy(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),K(this),delete this.element.rangepicker}getDates(t){const i=t?e=>d(e,t,this.datepickers[0].config.locale):e=>new Date(e);return this.dates.map(e=>void 0===e?e:i(e))}setDates(e,t){const[i,n]=this.datepickers,s=this.dates;this._updating=!0,i.setDate(e),n.setDate(t),delete this._updating,n.dates[0]!==s[1]?F(this,{target:this.inputs[1]}):i.dates[0]!==s[0]&&F(this,{target:this.inputs[0]})}}}(),function(e){var t=function(n,h,a){"use strict";var f,p,e,W={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(e in p=n.lazySizesConfig||n.lazysizesConfig||{},W)e in p||(p[e]=W[e]);if(!h||!h.getElementsByClassName)return{init:function(){},cfg:p,noSupport:!0};function c(e,t){N(e,t)||e.setAttribute("class",(e[O]("class")||"").trim()+" "+t)}function u(e,t){(t=N(e,t))&&e.setAttribute("class",(e[O]("class")||"").replace(t," "))}function j(e,t){var i;!de&&(i=n.picturefill||p.pf)?(t&&t.src&&!e[O]("srcset")&&e.setAttribute("srcset",t.src),i({reevaluate:!0,elements:[e]})):t&&t.src&&(e.src=t.src)}function t(i,e){return e?function(){T(i)}:function(){var e=this,t=arguments;T(function(){i.apply(e,t)})}}function z(e){function t(){var e=a.now()-n;e<99?L(t,99-e):(ue||s)(s)}var i,n,s=function(){i=null,e()};return function(){n=a.now(),i=i||L(t,99)}}function i(){!i.i&&h.getElementsByClassName&&(i.i=!0,ye._(),ve._())}var B,q,Y,m,g,H,v,P,I,R,y,b,w,k,D,K,$,J,U,s,Z,X,G,Q,S,x,E,ee,r,te,ie,ne,M,se,ae,re,oe,le,o,C=h.documentElement,de=n.HTMLPictureElement,l="addEventListener",O="getAttribute",d=n[l].bind(n),L=n.setTimeout,ce=n.requestAnimationFrame||L,ue=n.requestIdleCallback,he=/^picture$/i,fe=["load","error","lazyincluded","_lazyloaded"],A={},pe=Array.prototype.forEach,N=function(e,t){return A[t]||(A[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),A[t].test(e[O]("class")||"")&&A[t]},me=function(t,i,e){var n=e?l:"removeEventListener";e&&me(t,i),fe.forEach(function(e){t[n](e,i)})},_=function(e,t,i,n,s){var a=h.createEvent("Event");return(i=i||{}).instance=f,a.initEvent(t,!n,!s),a.detail=i,e.dispatchEvent(a),a},V=function(e,t){return(getComputedStyle(e,null)||{})[t]},ge=function(e,t,i){for(i=i||e.offsetWidth;i<p.minSize&&t&&!e._lazysizesWidth;)i=t.offsetWidth,t=t.parentNode;return i},T=(le=[],o=oe=[],Ce._lsFlush=Me,Ce),ve=(X=/^img$/i,G=/^iframe$/i,Q="onscroll"in n&&!/(gle|ing)bot/.test(navigator.userAgent),E=-1,ee=function(e){return(D=null==D?"hidden"==V(h.body,"visibility"):D)||!("hidden"==V(e.parentNode,"visibility")&&"hidden"==V(e,"visibility"))},K=ke,J=x=S=0,U=p.throttleDelay,s=p.ricTimeout,Z=ue&&49<s?function(){ue(De,{timeout:s}),s!==p.ricTimeout&&(s=p.ricTimeout)}:t(function(){L(De)},!0),te=t(Se),ie=function(e){te({target:e.target})},ne=t(function(t,e,i,n,s){var a,r,o,l,d;(r=_(t,"lazybeforeunveil",e)).defaultPrevented||(n&&(i?c(t,p.autosizesClass):t.setAttribute("sizes",n)),i=t[O](p.srcsetAttr),n=t[O](p.srcAttr),s&&(a=(l=t.parentNode)&&he.test(l.nodeName||"")),o=e.firesLoad||"src"in t&&(i||n||a),r={target:t},c(t,p.loadingClass),o&&(clearTimeout(H),H=L(we,2500),me(t,ie,!0)),a&&pe.call(l.getElementsByTagName("source"),xe),i?t.setAttribute("srcset",i):n&&!a&&(G.test(t.nodeName)?(e=n,0==(d=(l=t).getAttribute("data-load-mode")||p.iframeLoadMode)?l.contentWindow.location.replace(e):1==d&&(l.src=e)):t.src=n),s&&(i||a)&&j(t,{src:n})),t._lazyRace&&delete t._lazyRace,u(t,p.lazyClass),T(function(){var e=t.complete&&1<t.naturalWidth;o&&!e||(e&&c(t,p.fastLoadedClass),Se(r),t._lazyCache=!0,L(function(){"_lazyCache"in t&&delete t._lazyCache},9)),"lazy"==t.loading&&x--},!0)}),se=z(function(){p.loadMode=3,r()}),{_:function(){P=a.now(),f.elements=h.getElementsByClassName(p.lazyClass),m=h.getElementsByClassName(p.lazyClass+" "+p.preloadClass),d("scroll",r,!0),d("resize",r,!0),d("pageshow",function(e){var t;e.persisted&&(t=h.querySelectorAll("."+p.loadingClass)).length&&t.forEach&&ce(function(){t.forEach(function(e){e.complete&&M(e)})})}),n.MutationObserver?new MutationObserver(r).observe(C,{childList:!0,subtree:!0,attributes:!0}):(C[l]("DOMNodeInserted",r,!0),C[l]("DOMAttrModified",r,!0),setInterval(r,999)),d("hashchange",r,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){h[l](e,r,!0)}),/d$|^c/.test(h.readyState)?F():(d("load",F),h[l]("DOMContentLoaded",r),L(F,2e4)),f.elements.length?(ke(),T._lsFlush()):r()},checkElems:r=function(e){var t;(e=!0===e)&&(s=33),$||($=!0,(t=U-(a.now()-J))<0&&(t=0),e||t<9?Z():L(Z,t))},unveil:M=function(e){var t,i,n,s;e._lazyRace||(!(s="auto"==(n=(i=X.test(e.nodeName))&&(e[O](p.sizesAttr)||e[O]("sizes"))))&&g||!i||!e[O]("src")&&!e.srcset||e.complete||N(e,p.errorClass)||!N(e,p.lazyClass))&&(t=_(e,"lazyunveilread").detail,s&&ye.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,x++,ne(e,t,s,n,i))},_aLSL:Ee}),ye=(q=t(function(e,t,i,n){var s,a,r;if(e._lazysizesWidth=n,e.setAttribute("sizes",n+="px"),he.test(t.nodeName||""))for(a=0,r=(s=t.getElementsByTagName("source")).length;a<r;a++)s[a].setAttribute("sizes",n);i.detail.dataAttr||j(e,i.detail)}),{_:function(){B=h.getElementsByClassName(p.autosizesClass),d("resize",Y)},checkElems:Y=z(function(){var e,t=B.length;if(t)for(e=0;e<t;e++)be(B[e])}),updateElem:be});function be(e,t,i){var n=e.parentNode;n&&(i=ge(e,n,i),(t=_(e,"lazybeforesizes",{width:i,dataAttr:!!t})).defaultPrevented||(i=t.detail.width)&&i!==e._lazysizesWidth&&q(e,n,t,i))}function we(e){x--,e&&!(x<0)&&e.target||(x=0)}function ke(){var e,t,i,n,s,a,r,o,l,d,c,u=f.elements;if((v=p.loadMode)&&x<8&&(e=u.length)){for(t=0,E++;t<e;t++)if(u[t]&&!u[t]._lazyRace)if(!Q||f.prematureUnveil&&f.prematureUnveil(u[t]))M(u[t]);else if((r=u[t][O]("data-expand"))&&(s=+r)||(s=S),l||(l=!p.expand||p.expand<1?500<C.clientHeight&&500<C.clientWidth?500:370:p.expand,d=(f._defEx=l)*p.expFactor,c=p.hFac,D=null,S<d&&x<1&&2<E&&2<v&&!h.hidden?(S=d,E=0):S=1<v&&1<E&&x<6?l:0),o!==s&&(I=innerWidth+s*c,R=innerHeight+s,a=-1*s,o=s),d=u[t].getBoundingClientRect(),(k=d.bottom)>=a&&(y=d.top)<=R&&(w=d.right)>=a*c&&(b=d.left)<=I&&(k||w||b||y)&&(p.loadHidden||ee(u[t]))&&(g&&x<3&&!r&&(v<3||E<4)||function(e,t){var i,n=e,s=ee(e);for(y-=t,k+=t,b-=t,w+=t;s&&(n=n.offsetParent)&&n!=h.body&&n!=C;)(s=0<(V(n,"opacity")||1))&&"visible"!=V(n,"overflow")&&(i=n.getBoundingClientRect(),s=w>i.left&&b<i.right&&k>i.top-1&&y<i.bottom+1);return s}(u[t],s))){if(M(u[t]),n=!0,9<x)break}else!n&&g&&!i&&x<4&&E<4&&2<v&&(m[0]||p.preloadAfterLoad)&&(m[0]||!r&&(k||w||b||y||"auto"!=u[t][O](p.sizesAttr)))&&(i=m[0]||u[t]);i&&!n&&M(i)}}function De(){$=!1,J=a.now(),K()}function Se(e){var t=e.target;t._lazyCache?delete t._lazyCache:(we(e),c(t,p.loadedClass),u(t,p.loadingClass),me(t,ie),_(t,"lazyloaded"))}function xe(e){var t,i=e[O](p.srcsetAttr);(t=p.customMedia[e[O]("data-media")||e[O]("media")])&&e.setAttribute("media",t),i&&e.setAttribute("srcset",i)}function Ee(){3==p.loadMode&&(p.loadMode=2),se()}function F(){g||(a.now()-P<999?L(F,999):(g=!0,p.loadMode=3,r(),d("scroll",Ee,!0)))}function Me(){var e=o;for(o=oe.length?le:oe,re=!(ae=!0);e.length;)e.shift()();ae=!1}function Ce(e,t){ae&&!t?e.apply(this,arguments):(o.push(e),re||(re=!0,(h.hidden?L:ce)(Me)))}return L(function(){p.init&&i()}),f={cfg:p,autoSizer:ye,loader:ve,init:i,uP:j,aC:c,rC:u,hC:N,fire:_,gW:ge,rAF:T}}(e,e.document,Date);e.lazySizes=t,"object"==typeof module&&module.exports&&(module.exports=t)}("undefined"!=typeof window?window:{}),document.addEventListener("lazybeforeunveil",function(e){var t=e.target.getAttribute("data-bg");t&&(e.target.style.backgroundImage="url("+t+")")}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Maska={})}(this,function(e){"use strict";function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)),n}function r(n){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach(function(e){var t,i;t=n,i=s[e=e],e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(s,e))})}return n}var o={"#":{pattern:/[0-9]/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,uppercase:!0},a:{pattern:/[a-zA-Z]/,lowercase:!0},"!":{escape:!0},"*":{repeat:!0}};function d(e,t){var r,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o,n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return 1<s(t).length?(r=s(t).sort(function(e,t){return e.length-t.length}),function(t,e,i){var n,s=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],a=r.map(function(e){return l(t,e,i,!1)}).pop();for(n in r)if(function(e,t,i){for(var n in i)i[n].escape&&(t=t.replace(new RegExp(n+".{1}","g"),""));return t.split("").filter(function(e){return i[e]&&i[e].pattern}).length>=e.length}(a,r[n],i))return l(t,r[n],i,s);return""}(e,t,i,n)):l(e,t,i,n)}function s(t){try{return JSON.parse(t)}catch(e){return[t]}}function l(e,t,i,n){for(var s,a=!(3<arguments.length&&void 0!==n)||n,r=0,o=0,l="",d="";r<t.length&&o<e.length;){var c,u=t[r],h=e[o],f=i[u];f&&f.pattern?(f.pattern.test(h)&&(l+=(s=h,(c=f).transform&&(s=c.transform(s)),c.uppercase?s.toLocaleUpperCase():c.lowercase?s.toLocaleLowerCase():s),r++,a&&t[r]&&(i[t[r]]?i[t[r]]&&i[t[r]].escape&&(l+=t[r+1],r+=2):(l+=t[r],r++))),o++):f&&f.repeat?(c=i[t[r-1]])&&!c.pattern.test(h)?r++:r--:(f&&f.escape&&(u=t[++r]),a&&(l+=u),h===u&&o++,r++)}for(;a&&r<t.length;){var p=t[r];if(i[p]){d="";break}d+=p,r++}return l+d}function n(e){return!(e instanceof HTMLInputElement)&&e.querySelector("input")||e}function c(e){return"[object String]"===Object.prototype.toString.call(e)}t(u.prototype,[{key:"init",value:function(){for(var i=this,e=0;e<this._el.length;e++)!function(e){var t=n(i._el[e]);!i._opts.mask||t.dataset.mask&&t.dataset.mask===i._opts.mask||(t.dataset.mask=i._opts.mask),setTimeout(function(){return i.updateValue(t)},0),t.dataset.maskInited||(t.dataset.maskInited=!0,t.addEventListener("input",i.inputEvent),t.addEventListener("beforeinput",i.beforeInput))}(e)}},{key:"destroy",value:function(){for(var e=0;e<this._el.length;e++){var t=n(this._el[e]);t.removeEventListener("input",this.inputEvent),t.removeEventListener("beforeinput",this.beforeInput),delete t.dataset.mask,delete t.dataset.maskInited}}},{key:"updateValue",value:function(e,t){if(e&&e.type){var i=e.type.match(/^number$/i)&&e.validity.badInput;if(!e.value&&!i||!e.dataset.mask)return e.dataset.maskRawValue="",void this.dispatch("maska",e,t);for(var i=e.selectionEnd,n=e.value,s=n[i-1],a=(e.dataset.maskRawValue=d(e.value,e.dataset.mask,this._opts.tokens,!1),e.value),r=(this._opts.preprocessor&&(a=this._opts.preprocessor(a)),e.value=d(a,e.dataset.mask,this._opts.tokens),t&&"insertText"===t.inputType&&i===n.length&&(i=e.value.length),e),o=i,l=s;o&&o<r.value.length&&r.value.charAt(o-1)!==l;)o++;(r.type?r.type.match(/^(text|search|password|tel|url)$/i):!r.type)&&r===document.activeElement&&(r.setSelectionRange(o,o),setTimeout(function(){r.setSelectionRange(o,o)},0)),this.dispatch("maska",e,t),e.value!==n&&this.dispatch("input",e,t)}}},{key:"beforeInput",value:function(e){e&&e.target&&e.target.type&&e.target.type.match(/^number$/i)&&e.data&&isNaN(e.target.value+e.data)&&e.preventDefault()}},{key:"dispatch",value:function(e,t,i){t.dispatchEvent(function(e,t){var t=1<arguments.length&&void 0!==t?t:null,i=document.createEvent("Event");return i.initEvent(e,!0,!0),t&&(i.inputType=t),i}(e,i&&i.inputType||null))}}]);var a=u;function u(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this,s=u;if(!(n instanceof s))throw new TypeError("Cannot call a class as a function");if(!e)throw new Error("Maska: no element for mask");if(null!=i.preprocessor&&"function"!=typeof i.preprocessor)throw new Error("Maska: preprocessor must be a function");if(i.tokens)for(var a in i.tokens)i.tokens[a]=r({},i.tokens[a]),i.tokens[a].pattern&&c(i.tokens[a].pattern)&&(i.tokens[a].pattern=new RegExp(i.tokens[a].pattern));this._opts={mask:i.mask,tokens:r(r({},o),i.tokens),preprocessor:i.preprocessor},this._el=c(e)?document.querySelectorAll(e):e.length?e:[e],this.inputEvent=function(e){return t.updateValue(e.target,e)},this.init()}function h(e,t){var i;!t.value||f.has(e)&&(c((i=t).value)&&i.value===i.oldValue||Array.isArray(i.value)&&JSON.stringify(i.value)===JSON.stringify(i.oldValue)||i.value&&i.value.mask&&i.oldValue&&i.oldValue.mask&&i.value.mask===i.oldValue.mask)||f.set(e,new a(e,(i=t.value,e={},i.mask?(e.mask=Array.isArray(i.mask)?JSON.stringify(i.mask):i.mask,e.tokens=i.tokens?r({},i.tokens):{},e.preprocessor=i.preprocessor):e.mask=Array.isArray(i)?JSON.stringify(i):i,e)))}var f;f=new WeakMap;function p(e){e.directive("maska",h)}"undefined"!=typeof window&&window.Vue&&window.Vue.use&&window.Vue.use(p),e.create=function(e,t){return new a(e,t)},e.default=p,e.install=p,e.mask=d,e.maska=h,e.tokens=o,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ymapsTouchScroll=t():e.ymapsTouchScroll=t()}(window,function(){return i=[function(e,t,i){"use strict";function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.r(t),t.default=function(t){var e,i,n,s,a,r,o,l,d,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u=c.preventScroll,u=void 0===u||u,h=c.preventTouch,h=void 0===h||h,f=c.textScroll,f=void 0===f?"Чтобы изменить масштаб, прокручивайте карту, удерживая клавишу Ctrl":f,c=c.textTouch,c=void 0===c?"Чтобы переместить карту проведите по ней двумя пальцами":c;"undefined"!=typeof window&&"object"===p(t)&&(u||h)&&"string"==typeof f&&"string"==typeof c&&(e=/Mobi/i.test(navigator.userAgent)||/Android/i.test(navigator.userAgent),i=t.panes.get("events"),n=i.getElement(),s=e?c:f,a={alignItems:"center",boxSizing:"border-box",color:"#fff",display:"flex",justifyContent:"center",padding:"40px",textAlign:"center",transition:"background .2s",touchAction:"auto"},Object.keys(a).forEach(function(e){n.style[e]=a[e]}),r=function(e){n.style.background="rgba(0, 0, 0, ".concat(e?".6":"0",")"),n.textContent=e?s:""},h&&e&&(t.behaviors.disable("drag"),ymaps.domEvent.manager.add(n,"touchmove",function(e){r(1===e.get("touches").length)}),ymaps.domEvent.manager.add(n,"touchend",function(){r(!1)})),u&&!e&&((o=function(e){e?t.behaviors.enable("scrollZoom"):t.behaviors.disable("scrollZoom")})(d=l=!1),i.events.add("wheel",function(){l&&(o(d),r(!d))}),i.events.add("mousedown",function(){r(!1)}),i.events.add("mouseenter",function(){l=!0}),i.events.add("mouseleave",function(){r(l=!1)}),document.addEventListener("keydown",function(e){(d=e.ctrlKey)&&r(!1)}),document.addEventListener("keyup",function(){d=!1})))}}],n={},s.m=i,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0).default;function s(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var i,n});